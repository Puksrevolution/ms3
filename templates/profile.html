{% extends "base.html" %}

{% block content %}
<!-- User Icon -->
<div class="row justify-content-center text-center">
    <div class="col-10 col-sm-8 col-lg-6">
        <i class="fas fa-user-circle"></i>
    </div>
</div>

<!-- Greeting -->
<div class="row">
    <div class="col-12">
        <h2 class="text-center pb-4">
            Hi {{ username }}
        </h2>
    </div>
</div>

<!-- Info -->
<div class="row justify-content-center">
    <div class="col-10 col-sm-8 col-lg-6">
        <p>
            Creating new recipes and share them with other users.<br>
            Favourite other users recipes and add them to your profile.
        </p>
    </div>
</div>

<!-- Favourites List -->
<div class="row justify-content-center">
    <div class="col-12 col-sm-8 mt-4">
        <p class="recipe_list mb-3"><i class="fas fa-heart"></i> Your <strong>Favourite Recipes</strong>:</p>
        <!-- Favourites content -->
        {% for favourite in favourites %}
        <div>
            {% for recipe in favourites %}
            <h6 class="favourite underline"><a href="{{ url_for('view_recipe', recipe_id=recipe._id) }}">
                    {{ favourite.recipe_name }} </a></h6>
            <a class="btn-sm btn-remove" href="{{ url_for('remove_recipe', recipe_id=recipe._id) }}">
                <i class="fas fa-minus" id="like_minus"></i></a>
            {% endfor %}
        </div>
        {% endfor %}
    </div>
</div>

<!-- Recipes List -->
<div class="row justify-content-center">
    <div class="col-12 col-sm-8 mt-4">
        <p class="recipe_list mb-3"><i class="fas fa-utensils"></i> Your <strong>Created Recipes</strong>:</p>
        <!-- Recipes content -->
        {% for recipe in recipes %}
        {% if recipe.user == username %}
        <div>
            <div>
                <a href="{{ url_for('view_recipe', recipe_id=recipe._id) }}">
                    <h6 class="underline">{{ recipe.recipe_name }}</h6>
                </a>
            </div>
            {% if session.user|lower == recipe.user|lower %}
            <!-- Edit and delete recipes buttons -->
            <div class="row  mt-2">
                <div class="col-12">
                    <a class="btn btn-sm btn-success" href="{{ url_for('edit_recipe', recipe_id=recipe._id) }}">
                        Edit Recipe</a>
                    <a class="btn btn-sm btn-danger" href="{{ url_for('delete_recipe', recipe_id=recipe._id) }}"
                        title="delete" onclick="return confirm('Are you sure you want to delete this recipe?')">
                        Delete Recipe</a>
                </div>
            </div>
            {% endif %}
        </div>
        {% else %}
        {% endif %}
        {% endfor %}
    </div>
</div>

<!-- Change Password -->
<section>
    <div class="row">
        <div class="col-12">
            <h2 class="text-center mt-5 mb-4">Change Your Password</h2>
        </div>
    </div>
    <div class="row justify-content-center">
        <div class="col-11 col-sm-7 col-lg-5">
            <form class="form" method="POST" action="{{ url_for('profile', username=session['user']) }}">
                <!-- New Passowrd -->
                <div class="row">
                    <div class="form__group col-12">
                        <input class="form__input" id="password" name="password" type="password"
                            placeholder="New Password" minlength="5" maxlength="15" pattern="^[a-zA-Z0-9]{5,15}$"
                            autocomplete="off" required>
                        <label class="form__label" for="password">New Password</label>                        
                        <i class="fas fa-user-lock form__input-icon"></i>
                    </div>
                    <small class="form-text text-muted mb-3">5-15 characters</small>
                </div>
                <!-- Confirm passowrd -->
                <div class="row">
                    <div class="form__group col-12">
                        <input class="form__input" id="confirm-password" name="confirm-password" type="password"
                            placeholder="Confirm Password" minlength="5" maxlength="15" pattern="^[a-zA-Z0-9]{5,15}$"
                            autocomplete="off" required>                        
                        <label class="form__label" for="confirm-password">Confirm Password</label>                                                
                        <i class="fas fa-user-lock form__input-icon"></i>
                    </div>
                    <small class="form-text text-muted mb-3">5-15 characters</small>
                </div>                
                <!-- Submit New Password -->
                <div class="row">
                    <button class="col-12 btn btn-lavender" type="submit">
                        Submit New Password <i class="fas fa-check-circle"></i>
                    </button>
                </div>
            </form>
        </div>
    </div>
</section>

<!-- Products -->
<div class="row">
    <div class="col-12">
        <h2 class="text-center mt-5">
            Kitchen
        </h2>
        <hr>
        <h4 class="text-center mb-5">Tools & Helpers</h4>
    </div>
</div>
{% endblock %}